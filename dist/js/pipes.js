"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pipes=function(e){function t(){var e;return _classCallCheck(this,t),e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)),e.x=0,e.pipeHeight=.625*game.viewHeight,e.pipeWidth=.1015625*game.viewHeight,e.gap=.234375*game.viewHeight,e.max=e.pipeHeight,e.min=e.gap-(.78125*game.viewHeight-e.pipeHeight),e.y=e.getRdm(e.min,e.max),e.pipe_bottom_height=.78125*game.viewHeight-e.pipeHeight+e.y-e.gap,e.is_passed=!1,e.left_border=game.viewWidth-e.x,e.right_border=e.left_border+e.pipeWidth,e.gap_top=e.pipeHeight-e.y,e.gap_bottom=e.gap_top+e.gap,e}return _inherits(t,e),_createClass(t,[{key:"update",value:function(){var e=this;this.x+=game.speed,this.left_border=game.viewWidth-this.x,this.right_border=this.left_border+this.pipeWidth,this.x>game.viewWidth+this.pipeWidth&&(game.gameItems=game.gameItems.filter(function(t){return t!=e})),game.is_crashed&&(game.gameItems=game.gameItems.filter(function(t){return t!=e}));var t=this.left_border-game.bird.x,i=this.right_border-game.bird.x,r=game.bird.y-this.gap_top,o=this.gap_bottom-game.bird.y,a=Math.sqrt(Math.pow(t,2)+Math.pow(r,2)),s=Math.sqrt(Math.pow(t,2)+Math.pow(o,2)),n=Math.sqrt(Math.pow(i,2)+Math.pow(r,2)),p=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));t<game.bird.radius&&i>0&&(r<game.bird.radius||o<game.bird.radius)&&(game.is_crashed=!0),t<0&&i>0&&(r<=game.bird.radius||o<=game.bird.radius)&&(game.is_crashed=!0),(a<game.bird.radius||s<game.bird.radius||n<game.bird.radius||p<game.bird.radius)&&(game.is_crashed=!0),this.right_border-game.bird.x+game.bird.radius<0&&!this.is_passed&&(this.is_passed=!0,game.score++)}},{key:"render",value:function(){game.ctx.drawImage(game.imgCache.pipe_top,game.viewWidth-this.x,-this.y,this.pipeWidth,this.pipeHeight),game.ctx.drawImage(game.imgCache.pipe_bottom,0,0,52,512*this.pipe_bottom_height/game.viewHeight,this.left_border,this.gap_bottom,this.pipeWidth,this.pipe_bottom_height)}}]),t}(GameElement);